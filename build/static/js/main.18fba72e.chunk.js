(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{22:function(e,n,t){},41:function(e,n,t){},43:function(e,n,t){"use strict";t.r(n);var c=t(2),a=t.n(c),o=t(16),r=t.n(o),s=(t(22),t(17)),u=t(3),i=t(5),b=t.n(i),j="/api/persons",d={get:function(){return b.a.get(j)},create:function(e){return b.a.post(j,e)},update:function(e,n){return b.a.put("".concat(j,"/").concat(e),n)},remove:function(e){return b.a.delete("".concat(j,"/").concat(e))}},l=(t(41),t(0)),f=function(e){var n=e.props;if(""===n.message)return null;var t="success"===n.type?"notiSuccess":"notiFail";return Object(l.jsx)("div",{className:"".concat(t," noti"),children:n.message})},m=function(e){var n=e.event,t=e.nameValue,c=e.nameEvent,a=e.numberValue,o=e.numberEvent;return Object(l.jsxs)("form",{onSubmit:n,children:[Object(l.jsxs)("div",{children:["name: ",Object(l.jsx)("input",{value:t,onChange:c})]}),Object(l.jsxs)("div",{children:["number: ",Object(l.jsx)("input",{value:a,onChange:o})]}),Object(l.jsx)("div",{children:Object(l.jsx)("button",{type:"submit",children:"add"})})]})},h=function(e){var n=e.person,t=e.event;return Object(l.jsxs)("div",{children:[Object(l.jsxs)("p",{children:[n.name," ",n.number]}),Object(l.jsx)("button",{onClick:t,children:"delete"})]})},v=function(e){return Object(l.jsxs)("div",{children:["filter shown with ",Object(l.jsx)("input",{value:e.value,onChange:e.event})]})},O=function(){var e=Object(c.useState)([]),n=Object(u.a)(e,2),t=n[0],a=n[1],o=Object(c.useState)(""),r=Object(u.a)(o,2),i=r[0],b=r[1],j=Object(c.useState)(""),O=Object(u.a)(j,2),p=O[0],g=O[1],x=Object(c.useState)(""),w=Object(u.a)(x,2),y=w[0],C=w[1],S=Object(c.useState)({type:"",message:""}),k=Object(u.a)(S,2),E=k[0],F=k[1],P=function(e,n){F({type:e,message:n})},T=function(){setTimeout((function(){F({type:"",message:""})}),5e3)};Object(c.useEffect)((function(){d.get().then((function(e){a(e.data)}))}),[]);var D=""===y?t:t.filter((function(e){return e.name.toLowerCase().includes(y.toLowerCase())}));return Object(l.jsxs)("div",{children:[Object(l.jsx)("h2",{children:"Phonebook"}),Object(l.jsx)(f,{props:E}),Object(l.jsx)(v,{value:y,event:function(e){C(e.target.value)}}),Object(l.jsx)("h2",{children:"Add a new"}),Object(l.jsx)(m,{event:function(e){if(e.preventDefault(),t.some((function(e){return e.name==="".concat(i)}))){if(window.confirm("".concat(i," is already added to phonebook, replace the old number with a new one?"))){var n=t.find((function(e){return e.name===i}));n.number=p,d.update(n.id,n).then((function(e){b(""),g(""),200===e.status&&(P("success","Update ".concat(n.name,"'s number")),T())})).catch((function(e){404===e.response.status&&(P("error","Information of ".concat(n.name," has already been removed from server")),T())}))}}else{var c={name:i,number:p};d.create(c).then((function(e){a([].concat(Object(s.a)(t),[e.data])),b(""),g(""),P("success","Added ".concat(e.data.name)),T()})).catch((function(e){console.log(e),P("error","Oops! There is something wrong. Please try again"),T()}))}},nameValue:i,nameEvent:function(e){b(e.target.value)},numberValue:p,numberEvent:function(e){g(e.target.value)}}),Object(l.jsx)("h2",{children:"Numbers"}),D.map((function(e){return Object(l.jsx)(h,{person:e,event:function(){return n=e,void(window.confirm("Delete ".concat(n.name,"?"))&&d.remove(n.id).then((function(e){a(t.filter((function(e){return e!==n}))),P("success","Delete ".concat(n.name)),T()})).catch((function(e){console.log(e),P("error","Oops! There is something wrong. Please try again"),T()})));var n}},e.id)}))]})},p=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,44)).then((function(n){var t=n.getCLS,c=n.getFID,a=n.getFCP,o=n.getLCP,r=n.getTTFB;t(e),c(e),a(e),o(e),r(e)}))};r.a.render(Object(l.jsx)(a.a.StrictMode,{children:Object(l.jsx)(O,{})}),document.getElementById("root")),p()}},[[43,1,2]]]);
//# sourceMappingURL=main.18fba72e.chunk.js.map