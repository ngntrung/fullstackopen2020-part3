(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{22:function(e,n,t){},41:function(e,n,t){},43:function(e,n,t){"use strict";t.r(n);var c=t(2),a=t.n(c),r=t(16),o=t.n(r),u=(t(22),t(17)),s=t(3),i=t(5),d=t.n(i),j="/api/persons",b={get:function(){return d.a.get(j)},create:function(e){return d.a.post(j,e)},update:function(e,n){return d.a.put("".concat(j,"/").concat(e),n)},remove:function(e){return d.a.delete("".concat(j,"/").concat(e))}},l=(t(41),t(0)),f=function(e){var n=e.props;if(""===n.message)return null;var t="success"===n.type?"notiSuccess":"notiFail";return Object(l.jsx)("div",{className:"".concat(t," noti"),children:n.message})},m=function(e){var n=e.event,t=e.nameValue,c=e.nameEvent,a=e.numberValue,r=e.numberEvent;return Object(l.jsxs)("form",{onSubmit:n,children:[Object(l.jsxs)("div",{children:["name: ",Object(l.jsx)("input",{value:t,onChange:c})]}),Object(l.jsxs)("div",{children:["number: ",Object(l.jsx)("input",{value:a,onChange:r})]}),Object(l.jsx)("div",{children:Object(l.jsx)("button",{type:"submit",children:"add"})})]})},h=function(e){var n=e.person,t=e.event;return Object(l.jsxs)("div",{children:[Object(l.jsxs)("p",{children:[n.name," ",n.number]}),Object(l.jsx)("button",{onClick:t,children:"delete"})]})},v=function(e){return Object(l.jsxs)("div",{children:["filter shown with ",Object(l.jsx)("input",{value:e.value,onChange:e.event})]})},p=function(){var e=Object(c.useState)([]),n=Object(s.a)(e,2),t=n[0],a=n[1],r=Object(c.useState)(""),o=Object(s.a)(r,2),i=o[0],d=o[1],j=Object(c.useState)(""),p=Object(s.a)(j,2),O=p[0],x=p[1],g=Object(c.useState)(""),w=Object(s.a)(g,2),C=w[0],S=w[1],k=Object(c.useState)({type:"",message:""}),y=Object(s.a)(k,2),E=y[0],F=y[1],D=function(e,n){F({type:e,message:n})},L=function(){setTimeout((function(){F({type:"",message:""})}),5e3)};Object(c.useEffect)((function(){b.get().then((function(e){a(e.data)}))}),[]);var V=""===C?t:t.filter((function(e){return e.name.toLowerCase().includes(C.toLowerCase())}));return Object(l.jsxs)("div",{children:[Object(l.jsx)("h2",{children:"Phonebook"}),Object(l.jsx)(f,{props:E}),Object(l.jsx)(v,{value:C,event:function(e){S(e.target.value)}}),Object(l.jsx)("h2",{children:"Add a new"}),Object(l.jsx)(m,{event:function(e){if(e.preventDefault(),t.some((function(e){return e.name==="".concat(i)}))){if(window.confirm("".concat(i," is already added to phonebook, replace the old number with a new one?"))){var n=t.find((function(e){return e.name===i}));n.number=O,b.update(n.id,n).then((function(e){d(""),x(""),200===e.status&&(D("success","Update ".concat(n.name,"'s number")),L())})).catch((function(e){404===e.response.status&&(D("error","".concat(e.response.data.error)),L())}))}}else{var c={name:i,number:O};b.create(c).then((function(e){a([].concat(Object(u.a)(t),[e.data])),d(""),x(""),D("success","Added ".concat(e.data.name)),L()})).catch((function(e){D("error","".concat(e.response.data.error)),L()}))}},nameValue:i,nameEvent:function(e){d(e.target.value)},numberValue:O,numberEvent:function(e){x(e.target.value)}}),Object(l.jsx)("h2",{children:"Numbers"}),V.map((function(e){return Object(l.jsx)(h,{person:e,event:function(){return n=e,void(window.confirm("Delete ".concat(n.name,"?"))&&b.remove(n.id).then((function(e){a(t.filter((function(e){return e!==n}))),D("success","Delete ".concat(n.name)),L()})).catch((function(e){console.log(e),D("error","".concat(e.response.data.error)),L()})));var n}},e.id)}))]})},O=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,44)).then((function(n){var t=n.getCLS,c=n.getFID,a=n.getFCP,r=n.getLCP,o=n.getTTFB;t(e),c(e),a(e),r(e),o(e)}))};o.a.render(Object(l.jsx)(a.a.StrictMode,{children:Object(l.jsx)(p,{})}),document.getElementById("root")),O()}},[[43,1,2]]]);
//# sourceMappingURL=main.2e6e4d8e.chunk.js.map