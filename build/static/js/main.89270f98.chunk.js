(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{22:function(e,n,t){},41:function(e,n,t){},43:function(e,n,t){"use strict";t.r(n);var c=t(2),a=t.n(c),o=t(16),r=t.n(o),u=(t(22),t(17)),s=t(3),i=t(5),j=t.n(i),b="/api/persons",d={get:function(){return j.a.get(b)},create:function(e){return j.a.post(b,e)},update:function(e,n){return j.a.put("".concat(b,"/").concat(e),n)},remove:function(e){return j.a.delete("".concat(b,"/").concat(e))}},l=(t(41),t(0)),f=function(e){var n=e.props;if(""===n.message)return null;var t="success"===n.type?"notiSuccess":"notiFail";return Object(l.jsx)("div",{className:"".concat(t," noti"),children:n.message})},m=function(e){var n=e.event,t=e.nameValue,c=e.nameEvent,a=e.numberValue,o=e.numberEvent;return Object(l.jsxs)("form",{onSubmit:n,children:[Object(l.jsxs)("div",{children:["name: ",Object(l.jsx)("input",{value:t,onChange:c})]}),Object(l.jsxs)("div",{children:["number: ",Object(l.jsx)("input",{value:a,onChange:o})]}),Object(l.jsx)("div",{children:Object(l.jsx)("button",{type:"submit",children:"add"})})]})},h=function(e){var n=e.person,t=e.event;return Object(l.jsxs)("div",{children:[Object(l.jsxs)("p",{children:[n.name," ",n.number]}),Object(l.jsx)("button",{onClick:t,children:"delete"})]})},v=function(e){return Object(l.jsxs)("div",{children:["filter shown with ",Object(l.jsx)("input",{value:e.value,onChange:e.event})]})},O=function(){var e=Object(c.useState)([]),n=Object(s.a)(e,2),t=n[0],a=n[1],o=Object(c.useState)(""),r=Object(s.a)(o,2),i=r[0],j=r[1],b=Object(c.useState)(""),O=Object(s.a)(b,2),p=O[0],x=O[1],g=Object(c.useState)(""),w=Object(s.a)(g,2),C=w[0],S=w[1],k=Object(c.useState)({type:"",message:""}),y=Object(s.a)(k,2),E=y[0],F=y[1],D=function(e,n){F({type:e,message:n})},L=function(){setTimeout((function(){F({type:"",message:""})}),5e3)};Object(c.useEffect)((function(){d.get().then((function(e){a(e.data)}))}),[]);var V=""===C?t:t.filter((function(e){return e.name.toLowerCase().includes(C.toLowerCase())}));return Object(l.jsxs)("div",{children:[Object(l.jsx)("h2",{children:"Phonebook"}),Object(l.jsx)(f,{props:E}),Object(l.jsx)(v,{value:C,event:function(e){S(e.target.value)}}),Object(l.jsx)("h2",{children:"Add a new"}),Object(l.jsx)(m,{event:function(e){if(e.preventDefault(),t.some((function(e){return e.name==="".concat(i)}))){if(window.confirm("".concat(i," is already added to phonebook, replace the old number with a new one?"))){var n=t.find((function(e){return e.name===i}));n.number=p,d.update(n.id,n).then((function(e){j(""),x(""),200===e.status&&(D("success","Update ".concat(n.name,"'s number")),L())})).catch((function(e){404===e.response.status&&(D("error","".concat(e)),L())}))}}else{var c={name:i,number:p};d.create(c).then((function(e){a([].concat(Object(u.a)(t),[e.data])),j(""),x(""),D("success","Added ".concat(e.data.name)),L()})).catch((function(e){console.log(e),D("error","".concat(e)),L()}))}},nameValue:i,nameEvent:function(e){j(e.target.value)},numberValue:p,numberEvent:function(e){x(e.target.value)}}),Object(l.jsx)("h2",{children:"Numbers"}),V.map((function(e){return Object(l.jsx)(h,{person:e,event:function(){return n=e,void(window.confirm("Delete ".concat(n.name,"?"))&&d.remove(n.id).then((function(e){a(t.filter((function(e){return e!==n}))),D("success","Delete ".concat(n.name)),L()})).catch((function(e){console.log(e),D("error","".concat(e)),L()})));var n}},e.id)}))]})},p=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,44)).then((function(n){var t=n.getCLS,c=n.getFID,a=n.getFCP,o=n.getLCP,r=n.getTTFB;t(e),c(e),a(e),o(e),r(e)}))};r.a.render(Object(l.jsx)(a.a.StrictMode,{children:Object(l.jsx)(O,{})}),document.getElementById("root")),p()}},[[43,1,2]]]);
//# sourceMappingURL=main.89270f98.chunk.js.map